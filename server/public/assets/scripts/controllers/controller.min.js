/*! rtc.io 2016-01-28 */
var myApp=angular.module("myApp");myApp.controller("LobbyController",["$scope","ngAudio",function(a,b){console.log("lobby controller");var c=io.connect("http://localhost:5000");a.option="",a.kiosk=!1,a.user=!1,a.options=["kiosk","option1","option2","option3","option4","option5","option6"],a.newArray=[],a.loggedIn=!1,a.quickFunction=function(){console.log("before this?")},a.someFunction=function(){a.audio=b.load("http://www.soundjay.com/phone/sounds/telephone-ring-03a.mp3"),a.audio.play()},c.on("optionArray",function(b){console.log(b),a.newArray=[],a.newArray=b.array;for(var c=0;c<a.options.length;c++)for(var d=0;d<a.newArray.length;d++)a.options[c]==a.newArray[d]&&a.options.splice(c,1);console.log("does it happen to late")}),c.on("entrance",function(a){}),c.on("exit",function(a){}),c.on("call",function(a){console.log("a call has been made");$("<div>").css("color","black").text(a.message);$("body").append}),c.on("invite",function(a){console.log("you have been invited"+a.link);var b=$("<div><button ng-click='receivingCall()'><a href ='#videochat'>Click here to join</a></button></div>");$("body").append(b)}),a.receivingCall=function(){console.log("i am taking the call"),c.emit("callAccepted")},a.kioskLogin=function(){a.getOptions(),a.kiosk=!a.kiosk},a.acceptedCall=function(){c.emit("call",{connected:!0})},a.getOptions=function(){c.emit("getOptions")},a.callFunction=function(){c.emit("call",{call:"call has been made"})},a.loginFunction=function(b){console.log(b),a.loggedIn=!a.loggedIn,c.emit("login",{option:b}),"kiosk"==b?a.kiosk=!a.kiosk:a.user=!a.user},a.getOptions()}]),myApp.controller("VideoChatController",["$scope","VideoSetup",function(a,b){console.log("videochat controller"),b.videoFunction()}]),myApp.factory("VideoSetup",function(){var a=function(){var a={room:"test-room",signaller:"ws://localhost:5000"},b=RTC(a),c=document.getElementById("l-video"),d=document.getElementById("r-video");console.log(c),console.log(d),console.log(b.local),console.log(b.remote),c.appendChild(b.local),d.appendChild(b.remote),b.on("ready",init)};return{videoFunction:a}});